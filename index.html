---
---
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ site.title }}</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:20px;}
    .album{cursor:pointer;padding:10px;border:1px solid #ccc;margin:5px;display:inline-block;}
    .gallery img{max-width:200px;margin:5px;}
    .back{margin:10px 0;display:inline-block;cursor:pointer;color:blue;}
  </style>
</head>
<body>
  <h1>{{ site.full_name }}</h1>
  <div id="albums"></div>
  <div id="gallery" style="display:none"></div>

  <script>
    var files = [
      {% for file in site.static_files %}
        {% assign p = file.path %}
        {% if p contains 'images/' and (p contains '.jpg' or p contains '.jpeg' or p contains '.png' or p contains '.gif' or p contains '.webp') %}
          "{{ file.path | relative_url }}",
        {% endif %}
      {% endfor %}
    ];

    var albumsMap = {};
    files.forEach(function(path){
      var parts = path.replace(/^\/+/,'').split('/');
      if(parts.length < 2) return;
      var album = parts[1];
      albumsMap[album] = albumsMap[album] || [];
      albumsMap[album].push(path);
    });

    var albumsEl = document.getElementById('albums');
    var galleryEl = document.getElementById('gallery');

    function renderAlbums(){
      albumsEl.innerHTML = '';
      Object.keys(albumsMap).forEach(function(album){
        var el = document.createElement('div');
        el.className = 'album';
        el.textContent = album;
        el.onclick = function(){ openAlbum(album); };
        albumsEl.appendChild(el);
      });
    }

    function openAlbum(album){
      albumsEl.style.display = 'none';
      galleryEl.style.display = 'block';
      galleryEl.innerHTML = '<div class="back" onclick="closeGallery()">‚Üê Back to albums</div>';
      albumsMap[album].forEach(function(src){
        var img = document.createElement('img');
        img.src = src;
        img.alt = album;
        galleryEl.appendChild(img);
      });
    }

    function closeGallery(){
      galleryEl.style.display = 'none';
      albumsEl.style.display = 'block';
      galleryEl.innerHTML = '';
    }

    renderAlbums();
  </script>
</body>
</html>